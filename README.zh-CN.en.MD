![img](images/logo/png/logo-title.png)

<h3><div align="center">Telegram Forwarder| Telegram Forwarder</div>

---

<div align="center">

[![Docker](https://img.shields.io/badge/-Docker-2496ED?style=flat-square&logo=docker&logoColor=white)][docker-url] [![License: GPL-3.0](https://img.shields.io/badge/License-GPL%203.0-4CAF50?style=flat-square)](https://github.com/Heavrnl/TelegramForwarder/blob/main/LICENSE)

[docker-url]: https://hub.docker.com/r/heavrnl/telegramforwarder

</div>

## ğŸ“– Introduction
Telegram forwarder is a powerful message forwarding tool. You only need to join the channel/group chat to forward the messages in the specified chat to other chats. You don't need the bot to enter the corresponding channel/group to listen. It can be used for information flow integration filtering, message reminders, content collection and other scenarios, without the restriction of forwarding/copying prohibition. In addition, with Apprise's powerful push function, you can easily distribute messages to various platforms such as chat software, email, SMS, Webhooks, APIs, etc.

## âœ¨ Features

- ğŸ”„ **Multi-source forwarding**: Support forwarding from multiple sources to a specified target
- ğŸ” **Keyword filtering**: support whitelist and blacklist modes
- ğŸ“ **Regular Match**: Support regular expressions to match target text
- ğŸ“‹ **Content modification**: Support multiple ways to modify message content
- ğŸ¤– **AI processing**: Supports the use of AI interfaces from major manufacturers
- ğŸ“¹ **Media Filter**: Supports filtering media files of specified types
- ğŸ“° **RSS Subscription**: Support RSS subscription
- ğŸ“¢ **Multi-platform push**: Support push to multiple platforms via Apprise

## ğŸ“‹ Table of Contents

- [ğŸ“– Introduction](#-Introduction)
- [âœ¨ Features](#-Features)
- [ğŸš€ Quick Start](#-Quick Start)
  - [1ï¸âƒ£ Preparation](#1ï¸âƒ£-Preparation)
  - [2ï¸âƒ£ Configure the environment](#2ï¸âƒ£-Configure the environment)
  - [3ï¸âƒ£ Start the service](#3ï¸âƒ£-Start the service)
  - [4ï¸âƒ£ Update](#4ï¸âƒ£-Update)
- [ğŸ“š User Guide](#-User Guide)
  - [ğŸŒŸ Basic usage examples](#-Basic usage examples)
  - [ğŸ”§ Examples of special use scenarios](#-Examples of special use scenarios)
- [ğŸ› ï¸ Functional Details](#ï¸-Functional Details)
  - [âš¡ Filtering Process](#-Filtering Process)
  - [âš™ï¸ Setup Instructions](#ï¸- Setup Instructions)
    - [Main settings description](#Main settings description)
    - [Media Settings Instructions](#Media Settings Instructions)
  - [ğŸ¤– AI function](#-ai function)
    - [Configuration Instructions](#Configuration)
    - [Custom Model](#Custom Model)
    - AI Processing Capabilities
    - [Timed summary function](#Timed summary)
  - [ğŸ“¢ Push function](#-Push function)
    - [Settings](#Settings)
  - [ğŸ“° RSS Subscription](#-RSS Subscription)
    - [Enable RSS function](#Enable RSS function)
    - [Visit RSS dashboard](#Visit rss dashboard)
    - [Nginx configuration](#nginx configuration)
    - [RSS Configuration Instructions](#rss configuration management)
    - [Special settings](#Special settings)
    - [Notes](#Notes)
  
- [ğŸ¯ Special Features](#-Special Features)
  - [ğŸ”— Link forwarding function](#-Link forwarding function)
- [ğŸ“ Command list](#-Command list)
- [ğŸ’ Acknowledgements](#-Acknowledgements)
- [â˜• Donate](#-Donate)
- [ğŸ“„ Open Source Agreement](#-Open Source Agreement)



## ğŸš€ Quick Start

### 1ï¸âƒ£ Preparation

1. Get Telegram API credentials:
   - Visit https://my.telegram.org/apps
   - Create an application to get `API_ID` and `API_HASH`

2. Get the robot token:
   - Chat with @BotFather to create a bot
   - Get the robot's `BOT_TOKEN`

3. Get the user ID:
   - Talk to @userinfobot to get your `USER_ID`

### 2ï¸âƒ£ Configure the environment

Create a new folder
```bash
mkdir ./TelegramForwarder && cd ./TelegramForwarder
```
Download the repository's [**docker-compose.yml**](https://github.com/Heavrnl/TelegramForwarder/blob/main/docker-compose.yml) to the directory

Then download or copy the **[.env.example](./.env.example)** file from the repository, fill in the required fields, and rename it to `.env`
```bash
wget https://raw.githubusercontent.com/Heavrnl/TelegramForwarder/refs/heads/main/.env.example -O .env
```



### 3ï¸âƒ£ Start the service

First run (authentication required):

```bash
docker-compose run -it telegram-forwarder
```
CTRL+C Exit the container

Modify the docker-compose.yml file and modify `stdin_open: false` and `tty: false`

Background operation:
```bash
docker-compose up -d
```

### 4ï¸âƒ£ Update
Note: docker-compose does not need to pull the repository source code to run, unless you plan to build it yourself, otherwise you only need to execute the following command in the project directory to update.
```bash
docker-compose down
```
```bash
docker-compose pull
```
```bash
docker-compose up -d
```
## ğŸ“š Usage Guide

### ğŸŒŸ Basic usage examples

Suppose you subscribe to the channels "TG News" (https://t.me/tgnews) and "TG Reading" (https://t.me/tgread) but want to filter out some content that you are not interested in:

1. Create a Telegram group/channel (eg: "My TG Filter")
2. Add the robot to a group/channel and set it as an administrator
3. Send the command in the **newly created** group/channel:
   ```bash
   /bind https://t.me/tgnews or /bind "TG News"
   /bind https://t.me/tgread or /bind "TG Reading"
   ```
4. Set the message processing mode:
   ```bash
   /settings
   ```
   Select the rules for the corresponding channel to be operated and set them according to your preferences
   
   For detailed setting instructions, please see [ğŸ› ï¸ Function Details](#ï¸-Function Details)

5. Add blocked keywords:
   ```bash
   /add å¹¿å‘Š æ¨å¹¿ 'è¿™æ˜¯ å¹¿å‘Š'
   ```

6. å¦‚æœå‘ç°è½¬å‘çš„æ¶ˆæ¯æ ¼å¼æœ‰é—®é¢˜ï¼ˆæ¯”å¦‚æœ‰å¤šä½™çš„ç¬¦å·ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¤„ç†ï¼š
   ```bash
   /replace \*\*
   ```
   è¿™ä¼šåˆ é™¤æ¶ˆæ¯ä¸­çš„æ‰€æœ‰ `**` ç¬¦å·

>æ³¨æ„ï¼šä»¥ä¸Šå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œåªå¯¹ç¬¬ä¸€ä¸ªç»‘å®šçš„è§„åˆ™ç”Ÿæ•ˆï¼Œç¤ºä¾‹é‡Œæ˜¯TG æ–°é—»ã€‚è‹¥æƒ³å¯¹TG é˜…è¯»è¿›è¡Œæ“ä½œï¼Œéœ€è¦å…ˆä½¿ç”¨`/settings(/s)`ï¼Œé€‰æ‹©TG é˜…è¯»ï¼Œå†ç‚¹å‡»"åº”ç”¨å½“å‰è§„åˆ™"ï¼Œå°±å¯ä»¥å¯¹æ­¤è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œäº†ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨`/add_all(/aa)`ï¼Œ`/replace_all(/ra)`ç­‰æŒ‡ä»¤åŒæ—¶å¯¹ä¸¤æ¡è§„åˆ™ç”Ÿæ•ˆ

è¿™æ ·ï¼Œä½ å°±èƒ½æ”¶åˆ°ç»è¿‡è¿‡æ»¤å’Œæ ¼å¼åŒ–çš„é¢‘é“æ¶ˆæ¯äº†

### ğŸ”§ ç‰¹æ®Šä½¿ç”¨åœºæ™¯ç¤ºä¾‹  

#### 1. TG é¢‘é“çš„éƒ¨åˆ†æ¶ˆæ¯ç”±äºæ–‡å­—åµŒå…¥é“¾æ¥ï¼Œç‚¹å‡»ä¼šè®©ä½ ç¡®è®¤å†è·³è½¬ï¼Œä¾‹å¦‚ NodeSeek çš„å®˜æ–¹é€šçŸ¥é¢‘é“  

é¢‘é“çš„åŸå§‹æ¶ˆæ¯æ ¼å¼ 
```markdown
[**è´´å­æ ‡é¢˜**](https://www.nodeseek.com/post-xxxx-1)
```  
å¯ä»¥å¯¹é€šçŸ¥é¢‘é“çš„è½¬å‘è§„åˆ™ **ä¾æ¬¡** ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š  
```plaintext
/replace \*\*
/replace \[(?:\[([^\]]+)\])?([^\]]+)\]\(([^)]+)\) [\1]\2\n(\3)
/replace \[\]\s*
```  
æœ€ç»ˆæ‰€æœ‰è½¬å‘çš„æ¶ˆæ¯éƒ½ä¼šå˜æˆä»¥ä¸‹æ ¼å¼ï¼Œè¿™æ ·ç›´æ¥ç‚¹å‡»é“¾æ¥å°±æ— éœ€ç¡®è®¤è·³è½¬ï¼š  
```plaintext
è´´å­æ ‡é¢˜
(https://www.nodeseek.com/post-xxxx-1)
```  

---

#### 2. ç›‘å¬ç”¨æˆ·æ¶ˆæ¯æ ¼å¼ä¸ç¾è§‚ï¼Œå¯ä¼˜åŒ–æ¶ˆæ¯æ˜¾ç¤ºæ–¹å¼  

**ä¾æ¬¡** ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š  
```plaintext
/r ^(?=.) <blockquote>
/r (?<=.)(?=$) </blockquote>
```  
ç„¶åè®¾ç½®æ¶ˆæ¯æ ¼å¼ä¸º **HTML**ï¼Œè¿™æ ·ç›‘å¬ç”¨æˆ·æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯æ ¼å¼å°±ä¼šç¾è§‚å¾ˆå¤šï¼š  

![ç¤ºä¾‹å›¾ç‰‡](./images/user_spy.png)

---

#### 3. åŒæ­¥è§„åˆ™æ“ä½œ  

åœ¨ **è®¾ç½®èœå•** ä¸­å¼€å¯ **"åŒæ­¥è§„åˆ™"**ï¼Œå¹¶é€‰æ‹© **ç›®æ ‡è§„åˆ™**ï¼Œå½“å‰è§„åˆ™çš„æ‰€æœ‰æ“ä½œå°†åŒæ­¥åˆ°é€‰å®šçš„è§„åˆ™ã€‚  

é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š  
- ä¸æƒ³åœ¨å½“å‰çª—å£å¤„ç†è§„åˆ™  
- éœ€è¦åŒæ—¶æ“ä½œå¤šä¸ªè§„åˆ™  

å¦‚æœå½“å‰è§„åˆ™ä»…ç”¨äºåŒæ­¥è€Œä¸éœ€å®é™…ç”Ÿæ•ˆï¼Œå¯å°† **"æ˜¯å¦å¯ç”¨è§„åˆ™"** è®¾ç½®ä¸º **"å¦"**ã€‚

---

#### 4. å¦‚ä½•è½¬å‘åˆ°æ”¶è—å¤¹ (Saved Messages)
> ä¸æ¨èï¼Œæ“ä½œæ¯”è¾ƒç¹ç
1. åœ¨ä½ çš„ bot ç®¡ç†çš„ä»»æ„ç¾¤ç»„æˆ–é¢‘é“ä¸­å‘é€ä»¥ä¸‹å‘½ä»¤ï¼š  
   ```bash
   /bind https://t.me/tgnews ä½ çš„ç”¨æˆ·åï¼ˆå³å±•ç¤ºçš„åç§°ï¼‰
   ```  

2. éšæ„æ–°å»ºä¸€ä¸ªè§„åˆ™ï¼Œå¹¶è¿›è¡Œä»¥ä¸‹è®¾ç½®ï¼š  
   - **å¼€å¯åŒæ­¥åŠŸèƒ½**ï¼ŒåŒæ­¥åˆ° **è½¬å‘æ”¶è—å¤¹çš„è§„åˆ™**
   - **è½¬å‘æ¨¡å¼** é€‰æ‹© **"ç”¨æˆ·æ¨¡å¼"**  
   - **ç¦ç”¨è§„åˆ™**ï¼ˆå°†è§„åˆ™â€æ˜¯å¦å¯ç”¨è§„åˆ™â€œè®¾ç½®ä¸ºå…³é—­ï¼‰  

è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨å…¶ä»–è§„åˆ™ä¸­ç®¡ç†æ”¶è—å¤¹çš„è§„åˆ™ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šåŒæ­¥åˆ° **è½¬å‘æ”¶è—å¤¹** è§„åˆ™ä¸­ã€‚


## ğŸ› ï¸ åŠŸèƒ½è¯¦è§£

### âš¡ è¿‡æ»¤æµç¨‹
é¦–å…ˆè¦æ¸…æ¥šæ¶ˆæ¯è¿‡æ»¤é¡ºåºï¼Œæ‹¬å·é‡Œå¯¹åº”è®¾ç½®é‡Œçš„é€‰é¡¹ï¼š

![img](./images/flow_chart.png)



### âš™ï¸ è®¾ç½®è¯´æ˜
| ä¸»è®¾ç½®ç•Œé¢ | AIè®¾ç½®ç•Œé¢ | åª’ä½“è®¾ç½®ç•Œé¢ |
|---------|------|------|
| ![img](./images/settings_main.png) | ![img](./images/settings_ai.png) | ![img](./images/settings_media.png) |

#### ä¸»è®¾ç½®è¯´æ˜
ä»¥ä¸‹å¯¹è®¾ç½®é€‰é¡¹è¿›è¡Œè¯´æ˜
| è®¾ç½®é€‰é¡¹ | è¯´æ˜ |
|---------|------|
| åº”ç”¨å½“å‰è§„åˆ™ | é€‰æ‹©åï¼Œå…³é”®å­—æŒ‡ä»¤(/add,/remove_keyword,/list_keywordç­‰)å’Œæ›¿æ¢æŒ‡ä»¤(/replace,/list_replaceç­‰)çš„å¢åˆ æ”¹æŸ¥å¯¼å…¥å¯¼å‡ºå°†ä½œç”¨äºå½“å‰è§„åˆ™ |
| æ˜¯å¦å¯ç”¨è§„åˆ™ | é€‰æ‹©åï¼Œå½“å‰è§„åˆ™å°†è¢«å¯ç”¨ï¼Œå¦åˆ™å°†è¢«ç¦ç”¨ |
| å½“å‰å…³é”®å­—æ·»åŠ æ¨¡å¼ | ç‚¹å‡»å¯åˆ‡æ¢é»‘/ç™½åå•æ¨¡å¼ï¼Œç”±äºé»‘ç™½åå•æ˜¯åˆ†å¼€å¤„ç†çš„ï¼Œéœ€è¦æ‰‹åŠ¨åˆ‡æ¢ï¼Œæ³¨æ„ï¼Œæ­¤æ—¶å…³é”®å­—çš„å¢åˆ æ”¹æŸ¥éƒ½å’Œè¿™é‡Œçš„æ¨¡å¼æœ‰å…³ï¼Œå¦‚æœè¦ä½¿ç”¨æŒ‡ä»¤å¯¹å½“å‰è§„åˆ™çš„ç™½åå•è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œè¯·ç¡®ä¿è¿™é‡Œçš„æ¨¡å¼æ˜¯ç™½åå• |
| è¿‡æ»¤å…³é”®å­—æ—¶æ˜¯å¦é™„å¸¦å‘é€è€…åç§°å’ŒID | å¯ç”¨åï¼Œè¿‡æ»¤å…³é”®å­—æ—¶ä¼šåŒ…å«å‘é€è€…åç§°å’ŒIDä¿¡æ¯(ä¸ä¼šæ·»åŠ åˆ°å®é™…æ¶ˆæ¯ä¸­)ï¼Œå¯ç”¨äºé’ˆå¯¹ç‰¹å®šç”¨æˆ·è¿›è¡Œè¿‡æ»¤ |
| å¤„ç†æ¨¡å¼ | å¯åˆ‡æ¢ç¼–è¾‘/è½¬å‘æ¨¡å¼ã€‚ç¼–è¾‘æ¨¡å¼ä¸‹ä¼šç›´æ¥ä¿®æ”¹åŸæ¶ˆæ¯ï¼›è½¬å‘æ¨¡å¼ä¸‹ä¼šå°†å¤„ç†åçš„æ¶ˆæ¯è½¬å‘åˆ°ç›®æ ‡èŠå¤©ã€‚æ³¨æ„:ç¼–è¾‘æ¨¡å¼ä»…é€‚ç”¨äºä½ æ˜¯ç®¡ç†å‘˜çš„ä¸”åŸæ¶ˆæ¯æ˜¯é¢‘é“æ¶ˆæ¯æˆ–ç¾¤ç»„ä¸­è‡ªå·±å‘é€çš„æ¶ˆæ¯ |
| è¿‡æ»¤æ¨¡å¼ | å¯åˆ‡æ¢ä»…é»‘åå•/ä»…ç™½åå•/å…ˆé»‘åç™½/å…ˆç™½åé»‘æ¨¡å¼ã€‚ç”±äºé»‘ç™½åå•åˆ†å¼€å­˜å‚¨ï¼Œå¯æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„è¿‡æ»¤æ–¹å¼ |
| è½¬å‘æ¨¡å¼ | å¯åˆ‡æ¢ç”¨æˆ·/æœºå™¨äººæ¨¡å¼ã€‚ç”¨æˆ·æ¨¡å¼ä¸‹ä½¿ç”¨ç”¨æˆ·è´¦å·è½¬å‘æ¶ˆæ¯ï¼›æœºå™¨äººæ¨¡å¼ä¸‹ä½¿ç”¨æœºå™¨äººè´¦å·å‘é€æ¶ˆæ¯ |
| æ›¿æ¢æ¨¡å¼ | å¯ç”¨åå°†æ ¹æ®å·²è®¾ç½®çš„æ›¿æ¢è§„åˆ™å¯¹æ¶ˆæ¯è¿›è¡Œå¤„ç† |
| æ¶ˆæ¯æ ¼å¼ | å¯åˆ‡æ¢Markdown/HTMLæ ¼å¼ï¼Œåœ¨æœ€ç»ˆå‘é€é˜¶æ®µç”Ÿæ•ˆï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„Markdownå³å¯ |
| é¢„è§ˆæ¨¡å¼ | å¯åˆ‡æ¢å¼€å¯/å…³é—­/è·ŸéšåŸæ¶ˆæ¯ã€‚å¼€å¯åä¼šé¢„è§ˆæ¶ˆæ¯ä¸­çš„ç¬¬ä¸€ä¸ªé“¾æ¥ï¼Œé»˜è®¤è·ŸéšåŸæ¶ˆæ¯çš„é¢„è§ˆçŠ¶æ€ |
| åŸå§‹å‘é€è€…/åŸå§‹é“¾æ¥/å‘é€æ—¶é—´ | å¯ç”¨åä¼šåœ¨æ¶ˆæ¯å‘é€æ—¶æ·»åŠ è¿™äº›ä¿¡æ¯ï¼Œé»˜è®¤å…³é—­ï¼Œå¯åœ¨"å…¶ä»–è®¾ç½®"èœå•ä¸­è®¾ç½®è‡ªå®šä¹‰æ¨¡æ¿ |
| å»¶æ—¶å¤„ç† | å¯ç”¨åä¼šæŒ‰è®¾å®šçš„å»¶è¿Ÿæ—¶é—´é‡æ–°è·å–åŸæ¶ˆæ¯å†…å®¹ï¼Œå†å¼€å§‹å¤„ç†æµç¨‹ï¼Œé€‚ç”¨äºé¢‘ç¹ä¿®æ”¹æ¶ˆæ¯çš„é¢‘é“/ç¾¤ç»„ï¼Œå¯åœ¨ config/delay_time.txt ä¸­æ·»åŠ è‡ªå®šä¹‰å»¶è¿Ÿæ—¶é—´ |
| åˆ é™¤åŸå§‹æ¶ˆæ¯ | å¯ç”¨åä¼šåˆ é™¤åŸæ¶ˆæ¯ï¼Œä½¿ç”¨å‰è¯·ç¡®è®¤æ˜¯å¦æœ‰åˆ é™¤æƒé™ |
| è¯„è®ºåŒºç›´è¾¾æŒ‰é’® | å¯ç”¨ååœ¨è½¬å‘åçš„æ¶ˆæ¯ä¸‹å‘æ·»åŠ è¯„è®ºåŒºç›´è¾¾æŒ‰é’®ï¼Œå‰ææ˜¯åŸæ¶ˆæ¯æœ‰è¯„è®ºåŒº |
| åŒæ­¥åˆ°å…¶ä»–è§„åˆ™ | å¯ç”¨åä¼šåŒæ­¥å½“å‰è§„åˆ™çš„æ“ä½œåˆ°å…¶ä»–è§„åˆ™ï¼Œé™¤äº†"æ˜¯å¦å¯ç”¨è§„åˆ™"å’Œ"å¼€å¯åŒæ­¥"å…¶ä»–è®¾ç½®éƒ½ä¼šåŒæ­¥ |

#### åª’ä½“è®¾ç½®è¯´æ˜
| è®¾ç½®é€‰é¡¹ | è¯´æ˜ |
|---------|------|
| åª’ä½“ç±»å‹è¿‡æ»¤ | å¯ç”¨åä¼šè¿‡æ»¤æ‰éé€‰ä¸­çš„åª’ä½“ç±»å‹ |
| é€‰æ‹©çš„åª’ä½“ç±»å‹ | é€‰æ‹©è¦**å±è”½**çš„åª’ä½“ç±»å‹ï¼Œæ³¨æ„ï¼šTelegramå¯¹åª’ä½“æ–‡ä»¶çš„åˆ†ç±»æ˜¯å›ºå®šçš„ï¼Œä¸»è¦å°±æ˜¯è¿™å‡ ç§ï¼Œå›¾ç‰‡ (photo)ï¼Œæ–‡æ¡£ (document)ï¼Œè§†é¢‘ (video)ï¼ŒéŸ³é¢‘ (audio)ï¼Œè¯­éŸ³ (voice)ï¼Œå…¶ä¸­æ‰€æœ‰ä¸å±äºå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€è¯­éŸ³çš„æ–‡ä»¶éƒ½ä¼šè¢«å½’ç±»ä¸º"æ–‡æ¡£"ç±»å‹ã€‚æ¯”å¦‚ç—…æ¯’æ–‡ä»¶(.exe)ã€å‹ç¼©åŒ…(.zip)ã€æ–‡æœ¬æ–‡ä»¶(.txt)ç­‰ï¼Œåœ¨ Telegram ä¸­éƒ½å±äº"æ–‡æ¡£"ç±»å‹ã€‚ |
| åª’ä½“å¤§å°è¿‡æ»¤ | å¯ç”¨åä¼šè¿‡æ»¤æ‰è¶…è¿‡è®¾ç½®å¤§å°çš„åª’ä½“ |
| Media size limit | Set media size limit in MB. You can add custom size in config/media_size.txt |
| Send reminder when media size exceeds limit | After enabling, a reminder message will be sent when media exceeds the limit |
| Media extension filtering | When enabled, the selected media extensions will be filtered out |
| Media extension filtering mode | Switch blacklist/whitelist mode |
| Selected media extensions | Select the media extensions to filter. You can add custom extensions in config/media_extensions.txt |
| Release text | When enabled, filtering media will not block the entire message, but forward the text separately |

#### Other settings instructions

Several commonly used commands are integrated into the other settings menu, allowing them to interact directly in the interface, including:
- Copy Rules
- Copy Keywords
- Copy Replacement Rules
- Clear keywords
- Clear Replacement Rules
- Delete Rule

Clearing keywords, clearing replacement rules, and deleting rules can take effect on other rules.

At the same time, you can set custom templates here, including: user information template, time template, original link template
| Setup Options | Description |
|---------|------|
|Invert Blacklist| When enabled, the blacklist will be treated as a whitelist. If the whitelist-then-blacklist mode is used, the blacklist will be treated as a second whitelist.|
|Invert whitelist| When enabled, the whitelist will be treated as a blacklist. If the whitelist-then-blacklist mode is used, the whitelist will be treated as the second blacklist.|

Combined with the "first X then X" mode, a dual-layer blacklist/whitelist mechanism can be implemented. For example, after reversing the blacklist, the blacklist in "first white then black" will become a second-level whitelist, which is suitable for monitoring specific users and filtering their special keywords.



### ğŸ¤– AI Features

The project has built-in AI interfaces from major manufacturers, which can help you:
- Automatically translate foreign language content
- Regular summary of group messages
- Intelligent filtering of advertising information
- Automatically tag content
....
  
#### Configuration

1. Configure your AI interface in the `.env` file:
```ini
# OpenAI API
OPENAI_API_KEY=your_key
OPENAI_API_BASE= # Optional, default official interface

# Claude API
CLAUDE_API_KEY=your_key

# Other supported interfaces...
```

#### Custom Model

Didnâ€™t find the model name you want? Just add it in `config/ai_models.json`.

#### AI Processing

The following formats can be used in AI processing prompt words:
- `{source_message_context:number}` - Get the latest specified number of messages in the source chat window
- `{target_message_context:number}` - Get the latest specified number of messages in the target chat window
- `{source_message_time:number}` - Get the message of the source chat window in the last specified number of minutes
- `{target_message_time:number}` - Get the target chat window's messages within the last specified number of minutes

Examples of prompt words:

Pre-processing: After turning on AI processing, perform keyword filtering again and add "#ä¸è½¬å‘" to the filtering keywords.
```
This is an information integration channel that obtains news from multiple sources. Now you need to determine whether the new information is repeated with historical information content. If it is repeated, just reply "#Don't forward", otherwise please return to the original text of the new information and keep the format.
Remember, you can only return to the original text of "#notforward" or new information.
The following is historical information: {target_message_context:10}
Here is the new information:
```

#### Regular summary

After turning on the scheduled summary, the robot will automatically summarize the messages of the past 24 hours at the specified time (7 am every day by default).

- Multiple summary time points can be added in `config/summary_time.txt`
- Set default timezone in `.env`
- Customize summary prompts

> Note: The summary function will consume more API quota, please enable it as needed.

### ğŸ“¢ Push function

In addition to forwarding internal messages in Telegram, the project also integrates Apprise. With its powerful push function, you can easily distribute messages to various platforms such as chat software, email, SMS, Webhooks, APIs, etc.

| Push settings main interface | Push settings sub-interface |
|---------|------|
| ![img](./images/settings_push.png) | ![img](./images/settings_push_sub1.png) |

#### Setup Instructions

| Setup Options | Description |
|---------|------|
| Forward only to push configuration | Skip forwarding filter after enabling, jump directly to push filter |
| Media sending method | Supports two modes:<br>- Single: each media file is pushed in a separate message<br>- All: all media files are merged into one message and pushed<br>Which mode to use depends on whether the target platform supports pushing multiple attachments at a time |

### How to add push configuration?
For a complete list of push platforms and configuration formats, please refer to the [Apprise Wiki](https://github.com/caronc/apprise/wiki)

**Example: Push using ntfy.sh**

* Assume you want to push to a topic called `my_topic` on ntfy.sh.
* According to the Apprise Wiki, the format is `ntfy://ntfy.sh/your_theme_name`.
* Then, the configuration URL you need to add is:
    ```
    ntfy://ntfy.sh/my_topic
    ```



## ğŸ“° RSS Subscription

The project integrates the function of converting Telegram messages into RSS Feeds, which can easily convert Telegram channel/group content into standard RSS format, making it convenient to track through RSS readers.

### Enable RSS function

1. Configure RSS related parameters in the `.env` file:
   ```ini
   # RSS Configuration
   # Whether to enable RSS function (true/false)
   RSS_ENABLED=true
   # RSS base access URL. If left blank, the default access URL will be used (e.g. https://rss.example.com)
   RSS_BASE_URL=
   # RSS media file base URL. If left blank, the default access URL will be used (e.g. https://media.example.com)
   RSS_MEDIA_BASE_URL=
   ```
2. Uncomment the docker-compose.yml file
   ```
    # If you need to use the RSS function, please uncomment the following
     ports:
       - 9804:8000
   ```
3. Restart the service to enable the RSS function:
   ```bash
   docker-compose restart
   ```
> Note: Old version users need to redeploy with the new docker-compose.yml file: [docker-compose.yml](./docker-compose.yml)
### Access the RSS dashboard

Browser access `http://your server address:9804/`

### Nginx Configuration
```
location / {
        proxy_pass http://127.0.0.1:9804;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
    }
```

### RSS Configuration Management

Related interfaces

| Login interface | Dashboard interface | Create/edit configuration interface |
|---------|------|------|
| ![img](./images/rss_login.png) | ![img](./images/rss_dashboard.png) | ![img](./images/rss_create_config.png) |


### New/Edit Configuration Interface Description
| Setup Options | Description |
|---------|------|
| Rule ID | Select an existing forwarding rule to generate RSS subscription |
| Copy existing configuration | Select an existing RSS configuration and copy its configuration to the current form |
|Feed Title| Set Feed Title |
|AutoFill| Click to automatically generate a feed title based on the source chat window name of the rule |
|Feed Description| Set Feed Description |
|Language| Placeholder, no special function |
|Maximum number of entries| Set the maximum number of entries for the RSS feed, the default is 50. For chat sources with more media, please set it according to the actual hard disk size. |
|Use AI to extract titles and content| Once enabled, AI services will be used to automatically analyze messages, extract titles and content, and organize the format. Please set the AI â€‹â€‹model in the bot. It is not affected by the "Whether to enable AI processing" option in the bot. Once this option is enabled, it is mutually exclusive with all the following configurations. |
|AI Extraction Prompt Words| Set AI to extract prompt words for titles and content. If you need to customize, please make sure AI returns the following json format content: `{ "title": "Title", "content": "Main content" }` |
|Automatically extract title| After enabling, the title will be automatically extracted by the preset regular expression |
|Automatically extract content| After enabling, the content will be automatically extracted by the preset regular expression |
|Automatically convert Markdown to HTML| Once enabled, the Markdown format in Telegram will be automatically converted to standard HTML using the relevant library. If you need to handle it yourself, please use `/replace` in the bot to replace it yourself |
|Enable custom header extraction regular expression| When enabled, a custom regular expression will be used to extract headers |
|Enable custom content extraction regular expression| When enabled, custom regular expressions will be used to extract content |
|Priority| Set the execution order of regular expressions. The smaller the number, the higher the priority. The system will execute regular expressions in order from high to low priority. **The result of the previous regular expression extraction will be used as the input of the next one** until all extractions are completed |
|Regular Expression Test| Can be used to test whether the current regular expression matches the target text |

### Special Instructions
- If you only enable automatic title extraction but not automatic content extraction, the content will be the complete Telegram message with the title extracted
- If both the content processing option and the regular expression configuration are empty, the first 20 characters will be automatically matched as the title, and the content will be the original message


### Special settings
If `RSS_ENABLED=true` is enabled in .env, a new option `Forward to RSS only` will be added to the bot's settings. When enabled, messages will be interrupted after various processing by the RSS filter and will not be forwarded/edited.


### Notes

- There is no password retrieval function, please keep your account password safe

## ğŸ¯ Special Features

### ğŸ”— Link forwarding function

Send a message link to the bot to forward the message to the current chat window, ignoring the restrictions on forwarding and copying (the project's own functions already ignore the restrictions on forwarding and copying)

### ğŸ”„ Linked with the general forum blocking plugin
> https://github.com/heavrnl/universalforumblock

Make sure that the relevant parameters have been configured in the .env file. Use `/ufb_bind <forum domain name>` in the chat window that has been bound to achieve three-way linkage shielding. Use `/ufb_item_change` to switch the homepage keyword/homepage username/content page keyword/content page username to be synchronized with the current domain name.

## ğŸ“ Command List

```bash
Command List

Basic commands
/start - Start using
/help(/h) - Display this help information

Binding and Setup
/bind(/b) <source chat link or name> [target chat link or name] - bind to source chat
/settings(/s) [rule ID] - manage forwarding rules
/changelog(/cl) - View the changelog

Forwarding rule management
/copy_rule(/cr) <source rule ID> [destination rule ID] - copies all settings of the specified rule to the current rule or destination rule ID
/delete_rule(/dr) <rule ID> [rule ID] [rule ID] ... - Delete the specified rule
/list_rule(/lr) - List all forwarding rules

Keyword Management
/add(/a) <keyword> [keyword] ["keyword"] ['keyword'] ... - add a normal keyword
/add_regex(/ar) <regular expression> [regular expression] [regular expression] ... - Add a regular expression
/add_all(/aa) <keyword> [keyword] [keyword] ... - Adds a common keyword to all rules bound to the current channel
/add_regex_all(/ara) <regex> [regex] [regex] ... - Add regular expression keywords to all rules
/list_keyword(/lk) - List all keywords
/remove_keyword(/rk) <keyword> ["keyword"] ['keyword'] ... - remove a keyword
/remove_keyword_by_id(/rkbi) <ID> [ID] [ID] ... - remove a keyword by ID
/remove_all_keyword(/rak) <keyword> ["keyword"] ['keyword'] ... - removes the specified keyword from all rules bound to the current channel
/clear_all_keywords(/cak) - Clears all keywords for the current rule
/clear_all_keywords_regex(/cakr) - Clears all regular keywords of the current rule
/copy_keywords(/ck) <rule ID> - copies the keywords of the specified rule to the current rule
/copy_keywords_regex(/ckr) <rule ID> - copies the regular keywords of the specified rule to the current rule
/copy_replace(/crp) <rule ID> - copies the replacement rule of the specified rule to the current rule
/copy_rule(/cr) <rule ID> - copies all settings of the specified rule to the current rule (including keywords, regular expressions, replacement rules, media settings, etc.)

Replacement rule management
/replace(/r) <regular expression> [replacement content] - add replacement rules
/replace_all(/ra) <regular expression> [replace content] - add replacement rule to all rules
/list_replace(/lrp) - List all replace rules
/remove_replace(/rr) <number> - remove replace rule
/clear_all_replace(/car) - Clears all replacement rules for the current rule
/copy_replace(/crp) <rule ID> - copies the replacement rule of the specified rule to the current rule

Import and Export
/export_keyword(/ek) - Export the keyword of the current rule
/export_replace(/er) - Export the replacement rules for the current rule
/import_keyword(/ik) <send file at the same time> - import common keywords
/import_regex_keyword(/irk) <send file at the same time> - import regular keyword
/import_replace(/ir) <send file at the same time> - import replace rules

RSS related
/delete_rss_user(/dru) [username] - delete RSS user

UFB related
/ufb_bind(/ub) <domain name> - bind UFB domain name
/ufb_unbind(/uu) - Unbind UFB domain name
/ufb_item_change(/uic) - Toggle UFB sync configuration type

hint
â€¢ The command in brackets is a short form
â€¢ Angle brackets <> indicate required parameters
â€¢ Square brackets [] indicate optional parameters
â€¢ The import command requires the file to be sent at the same time
```

## ğŸ’ Acknowledgements

- [Apprise](https://github.com/caronc/apprise)
- [Telethon](https://github.com/LonamiWebs/Telethon)

## â˜• Donate

If you find this project helpful, please buy me a cup of coffee via:

[![ko-fi](https://ko-fi.com/img/githubbutton_sm.svg)](https://ko-fi.com/0heavrnl)


## ğŸ“„ Open Source Agreement

This project adopts the [GPL-3.0](LICENSE) open source agreement. For more information, please refer to the [LICENSE](LICENSE) file.


